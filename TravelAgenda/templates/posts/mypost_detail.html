<!-- templates/posts/mypost_detail.html -->
{% extends 'base.html' %}

{% block title %}{{ post.title }}{% endblock %}
{% block trace %}
<div class="container-fluid px-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-0">
            <li class="breadcrumb-item">Home</li>
            <li class="breadcrumb-item">Posts</li>
            <li class="breadcrumb-item">My</li>
            <li class="breadcrumb-item active" aria-current="page">Details</li>
        </ol>
    </nav>
</div>
{% endblock %}
{% block content %}
<div class="container-lg px-4">
    <div class="card">
        <div class="card-header">
          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a class="nav-link active" aria-current="true">帖子详情</a>
            </li>
          </ul>
        </div>
        <div class="card-body">
            <h5 class="card-title">{{ post.title }}</h5>
            <p class="card-text">{{ post.content }}</p>
            
            <p class="card-text"><small class="text-body-secondary">By {{ post.user.username }} on {{ post.created_at|date:"M d, Y H:i" }}</small></p>
  
          </div>
          <div class="container">
              <div class="row">
                  {% for image in images|slice:":9" %}
                  <div class="col-4 mb-2"> <!-- 4 columns per image, fits 3 images per row (12/4 = 3) -->
                      <img src="{{ image.image.url }}" class="img-fluid" alt="Post Image">
                  </div>
                  {% endfor %}
              </div>
          </div>
    </div>
    <div class="card">
        <div class="card-header">
          <ul class="nav nav-tabs card-header-tabs">
            <li class="nav-item">
              <a class="nav-link active" aria-current="true">评论区</a>
            </li>
          </ul>
        </div>
        <div class="card-body">
            <h3 class="mt-4">Comments</h3>
            {% if comments.exists %}
            <ul class="list-unstyled">
                {% for comment in comments %}
                    <li class="mb-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">{{ comment.user.username }}</h5>
                                <h6 class="card-subtitle mb-2 text-muted">{{ comment.created_at|date:"M d, Y H:i" }}</h6>
                                <p class="card-text">{{ comment.content }}</p>
                            </div>
                        </div>
                    </li>
                    {% if comment.replies.all %}
                        <ul class="list-unstyled ms-4 mt-2">
                            {% for reply in comment.replies.all|slice:":5" %}
                                <li class="mb-2">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">{{ reply.user.username }}</h5>
                                            <h6 class="card-subtitle mb-2 text-muted">{{ reply.created_at|date:"M d, Y H:i" }}</h6>
                                            <p class="card-text">{{ reply.content }}</p>
                                        </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                {% endfor %}
            </ul>
            {% else %}
                <p>No comments yet. Be the first to comment!</p>
            {% endif %}
        </div>
        <a href="{% url 'posts:my_post' %}" class="btn btn-primary mt-3">Back to All Posts</a>
    </div>
</div>  
{% endblock %} 
    <!-- <h1>{{ post.title }}</h1>
    <p>{{ post.content }}</p>

 
    <div class="post-images">
        {% for image in images %}
            <img src="{{ image.image.url }}" alt="Post Image">
        {% endfor %}
    </div>


    <h2>Comments</h2>
    {% if comments.exists %}
        <ul>
            {% for comment in comments %}
                <li>
                    <strong>{{ comment.user.username }}:</strong> {{ comment.content }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No comments yet. Be the first to comment!</p>
    {% endif %}


-->
